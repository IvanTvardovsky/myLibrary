# MyLibrary - ваша личная библиотекка
<img src="https://github.com/IvanTvardovsky/myLibrary/blob/main/assets/mylibrary.jpg" alt="image" width="500">

## О чём проект?
Это REST API приложение на языке Golang, которое позволяет пользователю вести свою личную библиотеку - добавлять уже прочитанные книги, а также пополнять список желаемого чтения. Каждая книга добавляется вручную, что позволяет пользователю самостоятельно выбрать любую понравившуюся обложку, формируя внешний вид своей библиотеки. Кроме того, пользователь может оставлять оценку каждой прочитанной книге по десятибалльной шкале и записывать свои мысли о ней. Есть функция сортировки книг по дате прочтения/оценке.

## База данных
Для хранения данных была выбрана PostgreSQL. Использовались две таблицы с типом связи "один ко многим"

#### Таблица users:
- user_id (тип: integer, автоинкрементный идентификатор пользователя)

- username (тип: varchar(32), уникальное имя пользователя)

- password (тип: varchar(256), хэш пароля)

- email (тип: varchar(64), уникальный email пользователя)

#### Таблица books:

- id (тип: integer, автоинкрементный идентификатор книги)

- title (тип: varchar(64), название книги)

- author (тип: varchar(64), автор книги)

- cover_image_url (тип: varchar(255), путь к файлу с обложкой книги)

- date_added (тип: timestamp, дата добавления книги в прочитанные или wishlist)

- comment (тип: text, отзыв о книге)

- rating (тип: integer, рейтинг книги от 1 до 10)

- user_id (тип: integer, id владельца книги)

- is_read (тип: boolean, прочитана книга или находится в wishlist)

## Аутентификация

Если хешированный пароль совпадает с паролем в базе данных, пользователю отправляется JSON с JWT-токеном, который действует 14 дней. При каждом входе в приложение клиентская часть проверяет, не истёк ли токен, и только потом дает возможность делать запросы.

## Эндпоинты

Вся информация передается в JSON.
##### POST /register
Создать нового пользователя. Отсылается информация о созданном пользователе.
##### POST /login
Аутентифицирует пользователя по почте и паролю. В случае успеха отсылается JWT токен. 
##### GET /user/:uuid
Получить всю информацию о пользователе.
##### PUT /user/:uuid
Частично обновить информацию о пользователе.
##### PATCH /user/:uuid
Полностью обновить информацию о пользователе.
##### DELETE /user/:uuid
Удалить пользователя из базы данных.
##### POST /user/:uuid/books/finished
Добавить прочитанную книгу в базу данных.
##### POST /user/:uuid/books/wishlist
Добавить wishlist книгу в базу данных.
##### GET /user/:uuid/books/finished
Получить список всех прочитанных книг.
##### GET /user/:uuid/books/wishlist
Получить список всех книг из wishlist.
##### PUT /user/:uuid/books/finished 
Переместить книгу из wishlist в прочитанные, опционально добавить к ней оценку и комментарий, обновить дату.

## Конфигуратор
Вся информация настраивается в файле config.yml и считывается с помощью пакета cleanenv.

